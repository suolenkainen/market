#!/usr/bin/env python3
# Author: Pekka Marjam√§ki - Suolenkainen
# https://github.com/suolenkainen/market


import unittest
import utils
import os

PATH = os.path.abspath(os.getcwd())


class UtilsTests(unittest.TestCase):

    # Testing csv converter
    def test_1_csv_to_dict_converter(self):
        _test_data_text = "id,name,wealth,active\n0,Alpha,1,True"
        _test_result_dict = [{'id': 0, 'name': 'Alpha', 'wealth': 1, 'active': True}]
        _filename = 'csv_to_dict.csv'

        _file = open(_filename, "w")
        _file.write(_test_data_text)
        _file.close()

        _result_dict = utils.csv_to_dict_converter(PATH + "\\" + _filename)

        if os.path.exists(_filename):
            os.remove(_filename)
        
        self.assertEqual(_result_dict, _test_result_dict)


if __name__ == '__main__':
    unittest.main()